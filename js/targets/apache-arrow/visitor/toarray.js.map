{"version":3,"sources":["visitor/toarray.ts"],"names":[],"mappings":"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","file":"toarray.js","sourcesContent":["// Licensed to the Apache Software Foundation (ASF) under one\r\n// or more contributor license agreements.  See the NOTICE file\r\n// distributed with this work for additional information\r\n// regarding copyright ownership.  The ASF licenses this file\r\n// to you under the Apache License, Version 2.0 (the\r\n// \"License\"); you may not use this file except in compliance\r\n// with the License.  You may obtain a copy of the License at\r\n//\r\n//   http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing,\r\n// software distributed under the License is distributed on an\r\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n// KIND, either express or implied.  See the License for the\r\n// specific language governing permissions and limitations\r\n// under the License.\r\n\r\nimport { Data } from '../data';\r\nimport { Type } from '../enum';\r\nimport { Visitor } from '../visitor';\r\nimport { VectorType } from '../interfaces';\r\nimport { instance as iteratorVisitor } from './iterator';\r\nimport {\r\n    DataType, Dictionary,\r\n    Bool, Null, Utf8, Binary, Decimal, FixedSizeBinary, List, FixedSizeList, Map_, Struct,\r\n    Float, Float16, Float32, Float64,\r\n    Int, Uint8, Uint16, Uint32, Uint64, Int8, Int16, Int32, Int64,\r\n    Date_, DateDay, DateMillisecond,\r\n    Interval, IntervalDayTime, IntervalYearMonth,\r\n    Time, TimeSecond, TimeMillisecond, TimeMicrosecond, TimeNanosecond,\r\n    Timestamp, TimestampSecond, TimestampMillisecond, TimestampMicrosecond, TimestampNanosecond,\r\n    Union, DenseUnion, SparseUnion,\r\n} from '../type';\r\n\r\n/** @ignore */\r\nexport interface ToArrayVisitor extends Visitor {\r\n    visit<T extends VectorType>(node: T): T['TArray'];\r\n    visitMany<T extends VectorType>(nodes: T[]): T['TArray'][];\r\n    getVisitFn<T extends Type>(node: T): (vector: VectorType<T>) => VectorType<T>['TArray'];\r\n    getVisitFn<T extends DataType>(node: VectorType<T> | Data<T> | T): (vector: VectorType<T>) => VectorType<T>['TArray'];\r\n    visitNull                                    <T extends Null>                (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitBool                                    <T extends Bool>                (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitInt                                     <T extends Int>                 (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitInt8                                    <T extends Int8>                (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitInt16                                   <T extends Int16>               (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitInt32                                   <T extends Int32>               (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitInt64                                   <T extends Int64>               (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitUint8                                   <T extends Uint8>               (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitUint16                                  <T extends Uint16>              (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitUint32                                  <T extends Uint32>              (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitUint64                                  <T extends Uint64>              (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitFloat                                   <T extends Float>               (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitFloat16                                 <T extends Float16>             (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitFloat32                                 <T extends Float32>             (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitFloat64                                 <T extends Float64>             (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitUtf8                                    <T extends Utf8>                (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitBinary                                  <T extends Binary>              (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitFixedSizeBinary                         <T extends FixedSizeBinary>     (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitDate                                    <T extends Date_>               (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitDateDay                                 <T extends DateDay>             (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitDateMillisecond                         <T extends DateMillisecond>     (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTimestamp                               <T extends Timestamp>           (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTimestampSecond                         <T extends TimestampSecond>     (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTimestampMillisecond                    <T extends TimestampMillisecond>(vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTimestampMicrosecond                    <T extends TimestampMicrosecond>(vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTimestampNanosecond                     <T extends TimestampNanosecond> (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTime                                    <T extends Time>                (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTimeSecond                              <T extends TimeSecond>          (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTimeMillisecond                         <T extends TimeMillisecond>     (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTimeMicrosecond                         <T extends TimeMicrosecond>     (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitTimeNanosecond                          <T extends TimeNanosecond>      (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitDecimal                                 <T extends Decimal>             (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitList                <R extends DataType, T extends List<R>>             (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitStruct                                  <T extends Struct>              (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitUnion                                   <T extends Union>               (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitDenseUnion                              <T extends DenseUnion>          (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitSparseUnion                             <T extends SparseUnion>         (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitDictionary          <R extends DataType, T extends Dictionary<R>>       (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitInterval                                <T extends Interval>            (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitIntervalDayTime                         <T extends IntervalDayTime>     (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitIntervalYearMonth                       <T extends IntervalYearMonth>   (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitFixedSizeList       <R extends DataType, T extends FixedSizeList<R>>    (vector: VectorType<T>): VectorType<T>['TArray'];\r\n    visitMap                                     <T extends Map_>                (vector: VectorType<T>): VectorType<T>['TArray'];\r\n}\r\n\r\n/** @ignore */\r\nexport class ToArrayVisitor extends Visitor {}\r\n\r\n/** @ignore */\r\nfunction arrayOfVector<T extends DataType>(vector: VectorType<T>): T['TArray'] {\r\n\r\n    const { type, length, stride } = vector;\r\n\r\n    // Fast case, return subarray if possible\r\n    switch (type.typeId) {\r\n        case Type.Int:\r\n        case Type.Float: case Type.Decimal:\r\n        case Type.Time: case Type.Timestamp:\r\n            return vector.data.values.subarray(0, length * stride);\r\n    }\r\n\r\n    // Otherwise if not primitive, slow copy\r\n    return [...iteratorVisitor.visit(vector)] as T['TArray'];\r\n}\r\n\r\nToArrayVisitor.prototype.visitNull                 = arrayOfVector;\r\nToArrayVisitor.prototype.visitBool                 = arrayOfVector;\r\nToArrayVisitor.prototype.visitInt                  = arrayOfVector;\r\nToArrayVisitor.prototype.visitInt8                 = arrayOfVector;\r\nToArrayVisitor.prototype.visitInt16                = arrayOfVector;\r\nToArrayVisitor.prototype.visitInt32                = arrayOfVector;\r\nToArrayVisitor.prototype.visitInt64                = arrayOfVector;\r\nToArrayVisitor.prototype.visitUint8                = arrayOfVector;\r\nToArrayVisitor.prototype.visitUint16               = arrayOfVector;\r\nToArrayVisitor.prototype.visitUint32               = arrayOfVector;\r\nToArrayVisitor.prototype.visitUint64               = arrayOfVector;\r\nToArrayVisitor.prototype.visitFloat                = arrayOfVector;\r\nToArrayVisitor.prototype.visitFloat16              = arrayOfVector;\r\nToArrayVisitor.prototype.visitFloat32              = arrayOfVector;\r\nToArrayVisitor.prototype.visitFloat64              = arrayOfVector;\r\nToArrayVisitor.prototype.visitUtf8                 = arrayOfVector;\r\nToArrayVisitor.prototype.visitBinary               = arrayOfVector;\r\nToArrayVisitor.prototype.visitFixedSizeBinary      = arrayOfVector;\r\nToArrayVisitor.prototype.visitDate                 = arrayOfVector;\r\nToArrayVisitor.prototype.visitDateDay              = arrayOfVector;\r\nToArrayVisitor.prototype.visitDateMillisecond      = arrayOfVector;\r\nToArrayVisitor.prototype.visitTimestamp            = arrayOfVector;\r\nToArrayVisitor.prototype.visitTimestampSecond      = arrayOfVector;\r\nToArrayVisitor.prototype.visitTimestampMillisecond = arrayOfVector;\r\nToArrayVisitor.prototype.visitTimestampMicrosecond = arrayOfVector;\r\nToArrayVisitor.prototype.visitTimestampNanosecond  = arrayOfVector;\r\nToArrayVisitor.prototype.visitTime                 = arrayOfVector;\r\nToArrayVisitor.prototype.visitTimeSecond           = arrayOfVector;\r\nToArrayVisitor.prototype.visitTimeMillisecond      = arrayOfVector;\r\nToArrayVisitor.prototype.visitTimeMicrosecond      = arrayOfVector;\r\nToArrayVisitor.prototype.visitTimeNanosecond       = arrayOfVector;\r\nToArrayVisitor.prototype.visitDecimal              = arrayOfVector;\r\nToArrayVisitor.prototype.visitList                 = arrayOfVector;\r\nToArrayVisitor.prototype.visitStruct               = arrayOfVector;\r\nToArrayVisitor.prototype.visitUnion                = arrayOfVector;\r\nToArrayVisitor.prototype.visitDenseUnion           = arrayOfVector;\r\nToArrayVisitor.prototype.visitSparseUnion          = arrayOfVector;\r\nToArrayVisitor.prototype.visitDictionary           = arrayOfVector;\r\nToArrayVisitor.prototype.visitInterval             = arrayOfVector;\r\nToArrayVisitor.prototype.visitIntervalDayTime      = arrayOfVector;\r\nToArrayVisitor.prototype.visitIntervalYearMonth    = arrayOfVector;\r\nToArrayVisitor.prototype.visitFixedSizeList        = arrayOfVector;\r\nToArrayVisitor.prototype.visitMap                  = arrayOfVector;\r\n\r\n/** @ignore */\r\nexport const instance = new ToArrayVisitor();\r\n"]}