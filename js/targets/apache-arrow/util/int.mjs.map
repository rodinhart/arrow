{"version":3,"sources":["util/int.ts"],"names":[],"mappings":"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","file":"int.js","sourcesContent":["// Licensed to the Apache Software Foundation (ASF) under one\r\n// or more contributor license agreements.  See the NOTICE file\r\n// distributed with this work for additional information\r\n// regarding copyright ownership.  The ASF licenses this file\r\n// to you under the Apache License, Version 2.0 (the\r\n// \"License\"); you may not use this file except in compliance\r\n// with the License.  You may obtain a copy of the License at\r\n//\r\n//   http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing,\r\n// software distributed under the License is distributed on an\r\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n// KIND, either express or implied.  See the License for the\r\n// specific language governing permissions and limitations\r\n// under the License.\r\n\r\n/** @ignore */\r\nconst carryBit16 = 1 << 16;\r\n\r\n/** @ignore */\r\nfunction intAsHex(value: number): string {\r\n    if (value < 0) {\r\n        value = 0xFFFFFFFF + value + 1;\r\n    }\r\n    return `0x${value.toString(16)}`;\r\n}\r\n\r\n/** @ignore */\r\nconst kInt32DecimalDigits = 8;\r\n/** @ignore */\r\nconst kPowersOfTen = [1,\r\n                      10,\r\n                      100,\r\n                      1000,\r\n                      10000,\r\n                      100000,\r\n                      1000000,\r\n                      10000000,\r\n                      100000000];\r\n\r\n/** @ignore */\r\nexport class BaseInt64 {\r\n    constructor (protected buffer: Uint32Array) {}\r\n\r\n    public high(): number { return this.buffer[1]; }\r\n    public low (): number { return this.buffer[0]; }\r\n\r\n    protected _times(other: BaseInt64) {\r\n        // Break the left and right numbers into 16 bit chunks\r\n        // so that we can multiply them without overflow.\r\n        const L = new Uint32Array([\r\n            this.buffer[1] >>> 16,\r\n            this.buffer[1] & 0xFFFF,\r\n            this.buffer[0] >>> 16,\r\n            this.buffer[0] & 0xFFFF\r\n        ]);\r\n\r\n        const R = new Uint32Array([\r\n            other.buffer[1] >>> 16,\r\n            other.buffer[1] & 0xFFFF,\r\n            other.buffer[0] >>> 16,\r\n            other.buffer[0] & 0xFFFF\r\n        ]);\r\n\r\n        let product = L[3] * R[3];\r\n        this.buffer[0] = product & 0xFFFF;\r\n\r\n        let sum = product >>> 16;\r\n\r\n        product = L[2] * R[3];\r\n        sum += product;\r\n\r\n        product = (L[3] * R[2]) >>> 0;\r\n        sum += product;\r\n\r\n        this.buffer[0] += sum << 16;\r\n\r\n        this.buffer[1] = (sum >>> 0 < product ? carryBit16 : 0);\r\n\r\n        this.buffer[1] += sum >>> 16;\r\n        this.buffer[1] += L[1] * R[3] + L[2] * R[2] + L[3] * R[1];\r\n        this.buffer[1] += (L[0] * R[3] + L[1] * R[2] + L[2] * R[1] + L[3] * R[0]) << 16;\r\n\r\n        return this;\r\n      }\r\n\r\n    protected _plus(other: BaseInt64) {\r\n        const sum = (this.buffer[0] + other.buffer[0]) >>> 0;\r\n        this.buffer[1] += other.buffer[1];\r\n        if (sum < (this.buffer[0] >>> 0)) {\r\n          ++this.buffer[1];\r\n        }\r\n        this.buffer[0] = sum;\r\n    }\r\n\r\n    public lessThan(other: BaseInt64): boolean {\r\n        return this.buffer[1] < other.buffer[1] ||\r\n            (this.buffer[1] === other.buffer[1] && this.buffer[0] < other.buffer[0]);\r\n    }\r\n\r\n    public equals(other: BaseInt64): boolean {\r\n        return this.buffer[1] === other.buffer[1] && this.buffer[0] == other.buffer[0];\r\n    }\r\n\r\n    public greaterThan(other: BaseInt64): boolean {\r\n        return other.lessThan(this);\r\n    }\r\n\r\n    public hex(): string {\r\n        return `${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`;\r\n    }\r\n}\r\n\r\n/** @ignore */\r\nexport class Uint64 extends BaseInt64 {\r\n    public times(other: Uint64): Uint64 {\r\n        this._times(other);\r\n        return this;\r\n    }\r\n\r\n    public plus(other: Uint64): Uint64 {\r\n        this._plus(other);\r\n        return this;\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static from(val: any, out_buffer = new Uint32Array(2)): Uint64 {\r\n        return Uint64.fromString(\r\n            typeof(val) === 'string' ? val : val.toString(),\r\n            out_buffer\r\n        );\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static fromNumber(num: number, out_buffer = new Uint32Array(2)): Uint64 {\r\n        // Always parse numbers as strings - pulling out high and low bits\r\n        // directly seems to lose precision sometimes\r\n        // For example:\r\n        //     > -4613034156400212000 >>> 0\r\n        //     721782784\r\n        // The correct lower 32-bits are 721782752\r\n        return Uint64.fromString(num.toString(), out_buffer);\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static fromString(str: string, out_buffer = new Uint32Array(2)): Uint64 {\r\n        const length = str.length;\r\n\r\n        let out = new Uint64(out_buffer);\r\n        for (let posn = 0; posn < length;) {\r\n            const group = kInt32DecimalDigits < length - posn ?\r\n                          kInt32DecimalDigits : length - posn;\r\n            const chunk = new Uint64(new Uint32Array([parseInt(str.substr(posn, group), 10), 0]));\r\n            const multiple = new Uint64(new Uint32Array([kPowersOfTen[group], 0]));\r\n\r\n            out.times(multiple);\r\n            out.plus(chunk);\r\n\r\n            posn += group;\r\n        }\r\n\r\n        return out;\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static convertArray(values: (string|number)[]): Uint32Array {\r\n        const data = new Uint32Array(values.length * 2);\r\n        for (let i = -1, n = values.length; ++i < n;) {\r\n            Uint64.from(values[i], new Uint32Array(data.buffer, data.byteOffset + 2 * i * 4, 2));\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static multiply(left: Uint64, right: Uint64): Uint64 {\r\n        let rtrn = new Uint64(new Uint32Array(left.buffer));\r\n        return rtrn.times(right);\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static add(left: Uint64, right: Uint64): Uint64 {\r\n        let rtrn = new Uint64(new Uint32Array(left.buffer));\r\n        return rtrn.plus(right);\r\n    }\r\n}\r\n\r\n/** @ignore */\r\nexport class Int64 extends BaseInt64 {\r\n    public negate(): Int64 {\r\n        this.buffer[0] = ~this.buffer[0] + 1;\r\n        this.buffer[1] = ~this.buffer[1];\r\n\r\n        if (this.buffer[0] == 0) { ++this.buffer[1]; }\r\n        return this;\r\n    }\r\n\r\n    public times(other: Int64): Int64 {\r\n        this._times(other);\r\n        return this;\r\n    }\r\n\r\n    public plus(other: Int64): Int64 {\r\n        this._plus(other);\r\n        return this;\r\n    }\r\n\r\n    public lessThan(other: Int64): boolean {\r\n        // force high bytes to be signed\r\n        const this_high = this.buffer[1] << 0;\r\n        const other_high = other.buffer[1] << 0;\r\n        return this_high < other_high ||\r\n            (this_high === other_high && this.buffer[0] < other.buffer[0]);\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static from(val: any, out_buffer = new Uint32Array(2)): Int64 {\r\n        return Int64.fromString(\r\n            typeof(val) === 'string' ? val : val.toString(),\r\n            out_buffer\r\n        );\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static fromNumber(num: number, out_buffer = new Uint32Array(2)): Int64 {\r\n        // Always parse numbers as strings - pulling out high and low bits\r\n        // directly seems to lose precision sometimes\r\n        // For example:\r\n        //     > -4613034156400212000 >>> 0\r\n        //     721782784\r\n        // The correct lower 32-bits are 721782752\r\n        return Int64.fromString(num.toString(), out_buffer);\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static fromString(str: string, out_buffer = new Uint32Array(2)): Int64 {\r\n        // TODO: Assert that out_buffer is 0 and length = 2\r\n        const negate = str.startsWith('-');\r\n        const length = str.length;\r\n\r\n        let out = new Int64(out_buffer);\r\n        for (let posn = negate ? 1 : 0; posn < length;) {\r\n            const group = kInt32DecimalDigits < length - posn ?\r\n                          kInt32DecimalDigits : length - posn;\r\n            const chunk = new Int64(new Uint32Array([parseInt(str.substr(posn, group), 10), 0]));\r\n            const multiple = new Int64(new Uint32Array([kPowersOfTen[group], 0]));\r\n\r\n            out.times(multiple);\r\n            out.plus(chunk);\r\n\r\n            posn += group;\r\n        }\r\n        return negate ? out.negate() : out;\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static convertArray(values: (string|number)[]): Uint32Array {\r\n        const data = new Uint32Array(values.length * 2);\r\n        for (let i = -1, n = values.length; ++i < n;) {\r\n            Int64.from(values[i], new Uint32Array(data.buffer, data.byteOffset + 2 * i * 4, 2));\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static multiply(left: Int64, right: Int64): Int64 {\r\n        let rtrn = new Int64(new Uint32Array(left.buffer));\r\n        return rtrn.times(right);\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static add(left: Int64, right: Int64): Int64 {\r\n        let rtrn = new Int64(new Uint32Array(left.buffer));\r\n        return rtrn.plus(right);\r\n    }\r\n}\r\n\r\n/** @ignore */\r\nexport class Int128 {\r\n    constructor (private buffer: Uint32Array) {\r\n        // buffer[3] MSB (high)\r\n        // buffer[2]\r\n        // buffer[1]\r\n        // buffer[0] LSB (low)\r\n    }\r\n\r\n    public high(): Int64 {\r\n        return new Int64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset + 8, 2));\r\n    }\r\n\r\n    public low(): Int64 {\r\n        return new Int64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset, 2));\r\n    }\r\n\r\n    public negate(): Int128 {\r\n        this.buffer[0] = ~this.buffer[0] + 1;\r\n        this.buffer[1] = ~this.buffer[1];\r\n        this.buffer[2] = ~this.buffer[2];\r\n        this.buffer[3] = ~this.buffer[3];\r\n\r\n        if (this.buffer[0] == 0) { ++this.buffer[1]; }\r\n        if (this.buffer[1] == 0) { ++this.buffer[2]; }\r\n        if (this.buffer[2] == 0) { ++this.buffer[3]; }\r\n        return this;\r\n    }\r\n\r\n    public times(other: Int128): Int128 {\r\n        // Break the left and right numbers into 32 bit chunks\r\n        // so that we can multiply them without overflow.\r\n        const L0 = new Uint64(new Uint32Array([this.buffer[3],  0]));\r\n        const L1 = new Uint64(new Uint32Array([this.buffer[2],  0]));\r\n        const L2 = new Uint64(new Uint32Array([this.buffer[1],  0]));\r\n        const L3 = new Uint64(new Uint32Array([this.buffer[0],  0]));\r\n\r\n        const R0 = new Uint64(new Uint32Array([other.buffer[3], 0]));\r\n        const R1 = new Uint64(new Uint32Array([other.buffer[2], 0]));\r\n        const R2 = new Uint64(new Uint32Array([other.buffer[1], 0]));\r\n        const R3 = new Uint64(new Uint32Array([other.buffer[0], 0]));\r\n\r\n        let product = Uint64.multiply(L3, R3);\r\n        this.buffer[0] = product.low();\r\n\r\n        let sum = new Uint64(new Uint32Array([product.high(), 0]));\r\n\r\n        product = Uint64.multiply(L2, R3);\r\n        sum.plus(product);\r\n\r\n        product = Uint64.multiply(L3, R2);\r\n        sum.plus(product);\r\n\r\n        this.buffer[1] = sum.low();\r\n\r\n        this.buffer[3] = (sum.lessThan(product) ? 1 : 0);\r\n\r\n        this.buffer[2] = sum.high();\r\n        let high = new Uint64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset + 8, 2));\r\n\r\n        high.plus(Uint64.multiply(L1, R3))\r\n            .plus(Uint64.multiply(L2, R2))\r\n            .plus(Uint64.multiply(L3, R1));\r\n        this.buffer[3] += Uint64.multiply(L0, R3)\r\n                        .plus(Uint64.multiply(L1, R2))\r\n                        .plus(Uint64.multiply(L2, R1))\r\n                        .plus(Uint64.multiply(L3, R0)).low();\r\n\r\n        return this;\r\n    }\r\n\r\n    public plus(other: Int128): Int128 {\r\n        let sums = new Uint32Array(4);\r\n        sums[3] = (this.buffer[3] + other.buffer[3]) >>> 0;\r\n        sums[2] = (this.buffer[2] + other.buffer[2]) >>> 0;\r\n        sums[1] = (this.buffer[1] + other.buffer[1]) >>> 0;\r\n        sums[0] = (this.buffer[0] + other.buffer[0]) >>> 0;\r\n\r\n        if (sums[0] < (this.buffer[0] >>> 0)) {\r\n            ++sums[1];\r\n        }\r\n        if (sums[1] < (this.buffer[1] >>> 0)) {\r\n            ++sums[2];\r\n        }\r\n        if (sums[2] < (this.buffer[2] >>> 0)) {\r\n            ++sums[3];\r\n        }\r\n\r\n        this.buffer[3] = sums[3];\r\n        this.buffer[2] = sums[2];\r\n        this.buffer[1] = sums[1];\r\n        this.buffer[0] = sums[0];\r\n\r\n        return this;\r\n    }\r\n\r\n    public hex(): string {\r\n        return `${intAsHex(this.buffer[3])} ${intAsHex(this.buffer[2])} ${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`;\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static multiply(left: Int128, right: Int128): Int128 {\r\n        let rtrn = new Int128(new Uint32Array(left.buffer));\r\n        return rtrn.times(right);\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static add(left: Int128, right: Int128): Int128 {\r\n        let rtrn = new Int128(new Uint32Array(left.buffer));\r\n        return rtrn.plus(right);\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static from(val: any, out_buffer = new Uint32Array(4)): Int128 {\r\n        return Int128.fromString(\r\n            typeof(val) === 'string' ? val : val.toString(),\r\n            out_buffer\r\n        );\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static fromNumber(num: number, out_buffer = new Uint32Array(4)): Int128 {\r\n        // Always parse numbers as strings - pulling out high and low bits\r\n        // directly seems to lose precision sometimes\r\n        // For example:\r\n        //     > -4613034156400212000 >>> 0\r\n        //     721782784\r\n        // The correct lower 32-bits are 721782752\r\n        return Int128.fromString(num.toString(), out_buffer);\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static fromString(str: string, out_buffer = new Uint32Array(4)): Int128 {\r\n        // TODO: Assert that out_buffer is 0 and length = 4\r\n        const negate = str.startsWith('-');\r\n        const length = str.length;\r\n\r\n        let out = new Int128(out_buffer);\r\n        for (let posn = negate ? 1 : 0; posn < length;) {\r\n            const group = kInt32DecimalDigits < length - posn ?\r\n                          kInt32DecimalDigits : length - posn;\r\n            const chunk = new Int128(new Uint32Array([parseInt(str.substr(posn, group), 10), 0, 0, 0]));\r\n            const multiple = new Int128(new Uint32Array([kPowersOfTen[group], 0, 0, 0]));\r\n\r\n            out.times(multiple);\r\n            out.plus(chunk);\r\n\r\n            posn += group;\r\n        }\r\n\r\n        return negate ? out.negate() : out;\r\n    }\r\n\r\n    /** @nocollapse */\r\n    public static convertArray(values: (string|number)[]): Uint32Array {\r\n        // TODO: Distinguish between string and number at compile-time\r\n        const data = new Uint32Array(values.length * 4);\r\n        for (let i = -1, n = values.length; ++i < n;) {\r\n            Int128.from(values[i], new Uint32Array(data.buffer, data.byteOffset + 4 * 4 * i, 4));\r\n        }\r\n        return data;\r\n    }\r\n}\r\n"]}